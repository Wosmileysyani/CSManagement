@{

    ViewBag.Title = "วิทยาการคอมพิวเตอร์";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<style>
    .carousel .item img {
        margin: 0 auto;
    }
</style>

<section class="content">
    <div class="box-default">
        <div id="myCarousel" class="carousel slide vertical" data-ride="carousel" style="overflow: hidden">
            <ol class="carousel-indicators">
                @for (int j = 0; j < ViewBag.Count; j++)
                {
                    <li data-target="#myCarousel" data-slide-to="@j" class="@(j == 0 ? "active" : string.Empty)"></li>
                }
            </ol>
            <div class="carousel-inner">
                @{int i = 0;}
                @foreach (var item in Model)
                {
                    i++;
                    var active = i == 1 ? "active" : "";
                    <div class="item @active">
                        <img src="~/imgSlideShow/@item.Pic_Img" style="width: 900px; height: 600px;" />
                    </div>
                }
            </div>
            <a class="left carousel-control" data-target="#myCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" data-target="#myCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

    </div>

    <div class="box-default">
        <div class="card-body">
            <div class="row" style="padding:15px">
                <div class="card col-lg-3">
                    <img src="~/img/logo1.png" alt="Avatar" style="width:100%" />
                </div>

                <div class="card col-lg-3">
                    <img src="~/img/logo2.png" alt="Avatar" style="width:100%">
                </div>

                <div class="card col-lg-3">
                    <img src="~/img/logo3.png" alt="Avatar" style="width:100%">
                </div>

                <div class="card col-lg-3">
                    <a href="" onclick="window.location.href = '@Url.Action("GoRegister", "Pictures" )'"><img src="~/img/logo4.png" alt="Avatar" style="width:100%" /></a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="box box-danger">
                    <div class="box-header with-border set-text">
                        <h3 class="box-title" style="letter-spacing:0px">สัดส่วนหมวดวิชาหลักสูตรสาขา</h3>
                    </div>
                    <div class="box-body chart-responsive">
                        <div class="chart" id="chartContainer" style="height: 300px; position: relative;"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="box box-danger">
                    <div class="box-header with-border set-text">
                        <h3 class="box-title" style="letter-spacing:0px">สัดส่วนการเข้าทำงานของศิษย์เก่า</h3>
                    </div>
                    <div class="box-body chart-responsive">
                        <div class="chart" id="chartContainer2" style="height: 300px; position: relative;"></div>
                    </div>
                </div>
            </div>
        </div>

        <p class="page-header text-center" style="font-size:40px"><i class="fa fa-star"></i>ผลงานนักศึกษา<i class="fa fa-star"></i></p>
        <div class="row">
            @{
                foreach (var item in ViewBag.ProjectCount)
                {
                    <div class="col-md-4">
                        <div class="box box-widget widget-user-2">
                            <div class="widget-user-header bg-yellow">
                                <div class="widget-user-image">
                                    <img class="img-circle" img src="~/img/icons8-cat-profile-64.png" />
                                </div>
                                <h3 class="widget-user-username" style="letter-spacing: 0px">@item.Pj_StuID</h3>
                                <h5 class="widget-user-desc">จัดการข้อมูลสาขาวิทยาการคอมพิวเตอร์</h5>
                            </div>
                            <div class="box-footer no-padding">
                                <ul class="nav nav-stacked">
                                    <li><a target="_blank" href="@item.Pj_Linkweb">เว็บไซต์<span class="pull-right badge bg-blue">เข้าชม</span></a></li>
                                    <li>
                                        <a target="_blank" href="@Url.Action("ShowPdf", "Projects")?id=@item.Pj_ID">
                                            รูปเล่ม
                                            <span class="pull-right badge bg-aqua">เข้าชม</span>
                                        </a>
                                    </li>
                                    <li><a class="btn_4 video-btn" alt="video" data-toggle="modal" data-src="https://www.facebook.com/plugins/video.php?href=@item.Pj_Video" data-target="#myModal">วิดีโอ
                                            <span class="pull-right badge bg-aqua">เข้าชม</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>

        <!-- Modal Video -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="modelClose">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <!-- 16:9 aspect ratio -->
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" id="videos" scrolling="no" src="" allowscriptaccess="always" allowFullScreen="true"></iframe>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
</section>



<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script type="text/javascript">

    window.onload = function () {
        var chart =
            new CanvasJS.Chart("chartContainer", {
                theme: "light2",
                exportEnabled: true,
                animationEnabled: true,
                data: [
                    {
                        type: "pie", //change type to bar, line, area, pie, etc
                        startAngle: 180,
                        toolTipContent: "<b>{label}</b>: {y}%",
                        indexLabel: "{label} {y}%",
                        dataPoints: @Html.Raw(ViewBag.DataPoints)
                    }
                ]
            });
        var chart2 =
            new CanvasJS.Chart("chartContainer2", {
                theme: "light2",
                exportEnabled: true,
                animationEnabled: true,
                data: [
                    {
                        type: "pie", //change type to bar, line, area, pie, etc
                        startAngle: 180,
                        toolTipContent: "<b>{label}</b>: {y}%",
                        indexLabel: "{label} {y}%",
                        dataPoints: @Html.Raw(ViewBag.DataPoints2)
                    }
                ]
            });
        chart.render();
        chart2.render();
    };
</script>
<style>

    .modal-dialog {
        max-width: 800px;
        margin: 30px auto;
    }

    .close {
        position: absolute;
        right: 1%;
        top: 0;
        z-index: 999;
        font-size: 4rem;
        font-weight: normal;
        color: black;
        opacity: 1;
    }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        // Gets the video src from the data-src on each button

        var $videoSrc;
        $('.video-btn').click(function () {
            $videoSrc = $(this).data("src");
            $("#videos").attr('src', $videoSrc);
        });
        // when the modal is opened autoplay it
        //$('#myModal').on('shown.bs.modal', function () {
        //})

        // stop playing the youtube video when I close the modal
        $('#myModal').on('hide.bs.modal', function () {
            // a poor man's stop video
            $("#videos").attr('src', $videoSrc);
        })

        $('#modelClose').click(function () {
            $("#videos").attr('src', $videoSrc);
        });
        // document ready
    });

</script>